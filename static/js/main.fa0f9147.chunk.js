(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){"use strict";(function(e){var r=a(15),s=a(3),n=a(4),o=a(6),c=a(5),i=a(7),l=a(2),u=a(0),h=a.n(u),p=a(180),d=a(30),m=a(40),E=a(89),f=a(111),g=a(95),v=a.n(g),y=a(112),O=a(114),b=a(83),S=(a(171),a(104),a(123)),I=!1,L=function(t){function a(){var e;return Object(s.a)(this,a),(e=Object(o.a)(this,Object(c.a)(a).call(this))).state={showMap:!1,latlng:[],keyword:""},e.resultButton=e.resultButton.bind(Object(l.a)(Object(l.a)(e))),e.resultCountButton=e.resultCountButton.bind(Object(l.a)(Object(l.a)(e))),e.keywordBlur=e.keywordBlur.bind(Object(l.a)(Object(l.a)(e))),e.onKeywordChange=e.onKeywordChange.bind(Object(l.a)(Object(l.a)(e))),e.formSubmit=e.formSubmit.bind(Object(l.a)(Object(l.a)(e))),e.correctLatLng=e.correctLatLng.bind(Object(l.a)(Object(l.a)(e))),e.resetForm=e.resetForm.bind(Object(l.a)(Object(l.a)(e))),e}return Object(i.a)(a,t),Object(n.a)(a,[{key:"debounce",value:function(e,t,a){var r;return function(){var s=this,n=arguments,o=a&&!r;clearTimeout(r),r=setTimeout(function(){r=null,a||e.apply(s,n)},t),o&&e.apply(s,n)}}},{key:"componentWillMount",value:function(){0===this.props.filters.length&&this.props.loadFilters(),this.radiusChange=this.debounce(this.radiusChange,200),this.setState({keyword:this.props.searchVars.keyword})}},{key:"resultButton",value:function(){var e=this;if(this.props.results.length>0)return h.a.createElement("button",{className:"btn-toggle",onClick:function(){e.setState({showMap:!e.state.showMap})}},this.state.showMap?"Show List":"Toggle Map")}},{key:"resultCountButton",value:function(){if(!this.props.itemsLoading&&this.props.hasSearched)return h.a.createElement("p",{className:"results-desc"},this.props.noSearchVars&&h.a.createElement("span",null,"No search parameters supplied"),!this.props.noSearchVars&&this.resultCountButtonText(),!this.props.noSearchVars&&this.resultButton())}},{key:"resultCountButtonText",value:function(){var e="Found "+this.props.results.length+" ";return this.props.totalResults&&100===this.props.results.length&&1*this.props.totalResults>100&&(e+="of "+1*this.props.totalResults+" "),e+="result"+(1*this.props.totalResults!==1?"s":"")}},{key:"keywordBlur",value:function(e){if(I||""===e.target.value){var t=Object(r.a)({},this.props.searchVars);t.keyword=e.target.value,t.addressLatLng=this.correctLatLng(),this.props.loadResults(t)}}},{key:"onKeywordChange",value:function(e){this.setState({keyword:e})}},{key:"enterPressed",value:function(e){if(I=!0,13===(e.keyCode||e.which)){I=!1;var t=Object(r.a)({},this.props.searchVars);t.keyword=""===e.target.value?null:e.target.value,t.addressLatLng=this.correctLatLng(),this.props.loadResults(t)}}},{key:"radiusChange",value:function(t){var a=Object(r.a)({},this.props.searchVars),s=this.props.loadResults;a.radius=1*t,e(function(){s(a)})}},{key:"formSubmit",value:function(e){e.preventDefault(),this.setState({latlng:this.props.searchVars.addressLatLng});var t=Object(r.a)({},this.props.searchVars);t.addressLatLng=this.correctLatLng(),t.keyword=e.target.keyword.value,this.props.loadResults(t)}},{key:"correctLatLng",value:function(){return void 0===this.props.searchVars.addressLatLng?this.state.latlng:this.props.searchVars.addressLatLng}},{key:"resetForm",value:function(){this.setState({latlng:{},keyword:""}),this.props.loadResults({category:"",keyword:"",address:"",addressLatLng:{},radius:5e4})}},{key:"render",value:function(){var e=this;return h.a.createElement("div",{className:"container-fluid"},h.a.createElement(y.a,{filters:this.props.filters,searchVars:this.props.searchVars,loadResults:this.props.loadResults}),h.a.createElement("form",{className:"form",onSubmit:function(t){return e.formSubmit(t)}},h.a.createElement("input",{value:this.state.keyword,type:"search",name:"keyword",onBlur:this.keywordBlur.bind(this),onKeyPress:this.enterPressed.bind(this),onChange:function(t){return e.onKeywordChange(t.target.value)},placeholder:"Enter topic or organisation"}),h.a.createElement(f.a,{noSearchVars:this.props.noSearchVars,loading:this.props.itemsLoading,loadResults:this.props.loadResults,searchVars:this.props.searchVars,radius:this.props.searchVars.radius}),this.props.searchVars.addressLatLng&&0!==Object.keys(this.props.searchVars.addressLatLng).length&&h.a.createElement(S.a,{handler:this.radiusChange.bind(this),radius:this.props.searchVars.radius}),h.a.createElement("button",{type:"submit"},"Search"),!this.props.noSearchVars&&this.props.hasSearched&&h.a.createElement(p.a,{render:function(t){var a=t.history,r=t.location;return h.a.createElement("button",{type:"button",onClick:function(){"/"!==r.pathname&&a.push(""),e.resetForm()}},"Reset form")}})),h.a.createElement("div",{className:"results"+(this.props.itemsLoading?" loading":"")},this.resultCountButton(),!this.props.itemsLoading&&this.state.showMap&&h.a.createElement(E.a,{className:"container-fluid",LatLng:this.props.searchVars.addressLatLng,map_results:this.props.results}),!this.props.itemsLoading&&!this.state.showMap&&this.props.results.map(function(t,a){return h.a.createElement(v.a,{height:280,key:a},h.a.createElement(O.a,{results:t,changeCategory:e.props.changeCategory,searchVars:e.props.searchVars,serviceId:t.FSD_ID,loadResults:e.props.loadResults}))})),h.a.createElement(b.a,null))}}]),a}(u.Component);t.a=Object(d.b)(function(e,t){var a=Object(r.a)({},e.searchVars);return!e.searchVars.category&&t.startCategory&&(a.category="undefined"===t.startCategory?"":t.startCategory),{filters:e.filter,results:e.results,showMap:e.showMap,searchVars:a,noSearchVars:e.noSearchVars,totalResults:e.totalResults,itemsLoading:e.itemsLoading,hasSearched:e.hasSearched}},m)(L)}).call(this,a(134).setImmediate)},111:function(e,t,a){"use strict";var r=a(3),s=a(4),n=a(6),o=a(5),c=a(7),i=a(2),l=a(0),u=a.n(l),h=(a(157),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(n.a)(this,Object(o.a)(t).call(this,e))).state={address:a.props.searchVars.address,reset:a.props.noSearchVars},a.onAddressChange=a.onAddressChange.bind(Object(i.a)(Object(i.a)(a))),a.onAddressBlur=a.onAddressBlur.bind(Object(i.a)(Object(i.a)(a))),a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentWillUpdate",value:function(){var e=this,t=document.getElementById("address_field");window.AddressFinder&&new window.AddressFinder.Widget(t,"ADDRESSFINDER_DEMO_KEY","NZ",{manual_style:!0}).on("result:select",function(t,a){e.setState({address:t}),e.props.loadResults({category:e.props.searchVars.category?e.props.searchVars.category:"",keyword:e.props.searchVars.keyword?e.props.searchVars.keyword:"",address:t,addressLatLng:t?{latitude:a.y,longitude:a.x}:{},radius:e.props.radius})})}},{key:"componentWillReceiveProps",value:function(e){e.loading||(0===e.searchVars.address.length?this.setState({address:""}):e.searchVars.address.length>0&&this.setState({address:e.searchVars.address}))}},{key:"onAddressChange",value:function(e){this.setState({address:e,reset:!1})}},{key:"onAddressBlur",value:function(e){this.setState({address:e,reset:!1}),e||this.props.loadResults({category:this.props.searchVars.category?this.props.searchVars.category:"",keyword:this.props.searchVars.keyword?this.props.searchVars.keyword:"",address:"",addressLatLng:{},radius:this.props.radius})}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"address_finder_container"},u.a.createElement("input",{value:this.state.address,id:"address_field",type:"search",onBlur:function(t){return e.onAddressBlur(t.target.value)},onChange:function(t){e.onAddressChange(t.target.value)},name:"address",className:"address-finder-input",placeholder:"Enter a Location"}))}}]),t}(u.a.Component));t.a=h},112:function(e,t,a){"use strict";var r=a(15),s=a(3),n=a(4),o=a(6),c=a(5),i=a(7),l=a(2),u=a(0),h=a.n(u),p=(a(104),a(180)),d=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(o.a)(this,Object(c.a)(t).call(this))).categoryChange=e.categoryChange.bind(Object(l.a)(Object(l.a)(e))),e}return Object(i.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){this.props.searchVars.category&&this.categoryChange(this.props.searchVars.category)}},{key:"handleChange",value:function(e){this.categoryChange(this.props.searchVars.category===e.target.value?"":e.target.value)}},{key:"categoryChange",value:function(e){var t=Object(r.a)({},this.props.searchVars);t.category=e,this.props.loadResults(t)}},{key:"render",value:function(){var e=this;return h.a.createElement("div",{className:"filters"+(0===this.props.filters.length?" loading":"")},h.a.createElement("nav",{className:"nav"},this.props.filters.map(function(t,a){return h.a.createElement(p.a,{key:a,render:function(a){var r=a.history;return h.a.createElement("button",{className:e.props.searchVars.category===t.name?"selected":"",key:t.num,onClick:function(){r.push(e.props.searchVars.category===t.name?"":"/category/"+encodeURIComponent(t.name)),e.categoryChange(e.props.searchVars.category===t.name?"":t.name)}},t.name)}})})),h.a.createElement(p.a,{render:function(t){var a=t.history;return h.a.createElement("select",{value:e.props.searchVars.category,onChange:function(t){a.push(e.props.searchVars.category===t.target.value||""===t.target.value?"":"/category/"+encodeURIComponent(t.target.value)),e.categoryChange(e.props.searchVars.category===t.target.value?"":t.target.value)}},h.a.createElement("option",{name:"filters",value:"",defaultValue:!0},"-- Select Category --"),e.props.filters.map(function(e){return h.a.createElement("option",{key:e.num,name:"filters"},e.name)}))}}))}}]),t}(h.a.Component);t.a=d},114:function(e,t,a){"use strict";var r=a(3),s=a(4),n=a(6),o=a(5),c=a(7),i=a(0),l=a.n(i),u=a(182),h=(a(166),a(87)),p=a(53),d=function(e){function t(){return Object(r.a)(this,t),Object(n.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("div",{className:"service"},l.a.createElement("div",{className:"search-result-hero"},l.a.createElement("h2",null,l.a.createElement(u.a,{to:"/service/".concat(this.props.results.FSD_ID)},this.props.results.PROVIDER_NAME)),this.props.results.DISTANCE&&l.a.createElement("small",null,(1*this.props.results.DISTANCE/1e3).toFixed(1)," km"),l.a.createElement(p.a,{phone:this.props.results.PUBLISHED_PHONE_1,email:this.props.results.PUBLISHED_CONTACT_EMAIL_1,hours:this.props.results.PROVIDER_CONTACT_AVAILABILITY})),l.a.createElement(h.a,{results:this.props.results,changeCategory:this.props.changeCategory,searchVars:this.props.searchVars,serviceId:this.props.serviceId,loadimmediately:!1,loadResults:this.props.loadResults})))}}]),t}(i.Component);t.a=d},123:function(e,t,a){"use strict";var r=a(3),s=a(4),n=a(6),o=a(5),c=a(7),i=a(2),l=a(0),u=a.n(l),h=(a(173),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(n.a)(this,Object(o.a)(t).call(this,e))).state={radius:e.radius},a.onRadiusChange=a.onRadiusChange.bind(Object(i.a)(Object(i.a)(a))),a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"onRadiusChange",value:function(e){this.setState({radius:e}),this.props.handler(e)}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"proximity"},u.a.createElement("div",null,u.a.createElement("div",{className:"range"},u.a.createElement("input",{value:this.state.radius,type:"range",min:"25000",max:"75000",step:"25000",onChange:function(t){e.onRadiusChange(t.target.value)}})),u.a.createElement("ul",{className:"range-labels"},u.a.createElement("li",{className:"first"},"Within 25km"),u.a.createElement("li",{className:"middle"},"50km"),u.a.createElement("li",{className:"last"},"100km"))))}}]),t}(u.a.Component));t.a=h},127:function(e,t,a){e.exports=a(177)},132:function(e,t,a){},157:function(e,t,a){},166:function(e,t,a){},169:function(e,t,a){},171:function(e,t,a){},173:function(e,t,a){},175:function(e,t,a){},177:function(e,t,a){"use strict";a.r(t);var r=a(3),s=a(4),n=a(6),o=a(5),c=a(7),i=a(0),l=a.n(i),u=a(35),h=a.n(u),p=(a(132),a(106)),d=a(30),m=a(40),E=function(e){function t(){return Object(r.a)(this,t),Object(n.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("p",{className:"container-fluid"},"If you are using a mobile device and are looking for family support services near you then you can use Find Wh\u0101nau Support, the mobile responsive site for the Ministry of Social Development\u2019s Family Services Directory."),l.a.createElement("p",{className:"container-fluid"},"If you are a provider or want to use the enhanced functions then please visit ",l.a.createElement("a",{href:"https://www.familyservices.govt.nz/directory"},"Family Services Directory"),"."),l.a.createElement(p.a,{filters:this.props.loadFilters,startCategory:decodeURIComponent(this.props.match.params.category)}))}}]),t}(i.Component),f=Object(d.b)(function(e){return e},m)(E),g=a(89),v=a(180),y=a(182),O=a(83),b=a(87),S=a(53),I=function(e){function t(){return Object(r.a)(this,t),Object(n.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.loadService({category:this.props.match.params.category},this.props.match.params.name),window.scrollTo(0,0)}},{key:"render",value:function(){var e=this,t=this.props,a=t.match.params.name,r=t.result.filter(function(e){return e.FSD_ID===a});return l.a.createElement("div",null,l.a.createElement("div",{className:"container-fluid"},l.a.createElement("div",{className:"service-info"+(0===r.length?" loading":"")},l.a.createElement(v.a,{render:function(){return l.a.createElement(y.a,{to:"/"+(e.props.searchVars.category?"category/"+encodeURIComponent(decodeURIComponent(e.props.searchVars.category)):""),onClick:function(){window.scrollTo(0,0)}},"Go back")}}),l.a.createElement("ul",{className:"list-stripped"},r.map(function(t,a){return l.a.createElement("div",{key:a},l.a.createElement("div",{className:"search-result-hero"},l.a.createElement("h2",null,t.PROVIDER_NAME),l.a.createElement(S.a,{phone:t.PUBLISHED_PHONE_1,email:t.PUBLISHED_CONTACT_EMAIL_1,hours:t.PROVIDER_CONTACT_AVAILABILITY})),l.a.createElement(b.a,{results:t,changeCategory:e.props.changeCategory,searchVars:e.props.searchVars,serviceId:t.FSD_ID,loadimmediately:!0,preview:!1}),l.a.createElement(O.a,{subject:t.PROVIDER_NAME}))})))),l.a.createElement(g.a,{map_results:r}))}}]),t}(l.a.Component),L=Object(d.b)(function(e){return{result:e.result,searchVars:e.searchVars}},m)(I),C=(a(175),function(e){function t(){return Object(r.a)(this,t),Object(n.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"displayGovtFooter",value:function(){return!1}},{key:"render",value:function(){return l.a.createElement("div",{className:"footer","aria-label":"Footer",role:"contentinfo"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"footer-item"},l.a.createElement("p",null,"Data sourced from ",l.a.createElement("a",{href:"https://data.govt.nz"},"data.govt.nz")),l.a.createElement("p",null,"Another alpha from the ",l.a.createElement("a",{href:"https://webtoolkit.govt.nz/blog/tag/service-innovation-lab/"},"Service Innovation Lab")),l.a.createElement("p",null,"Please find the full directory or add your services at ",l.a.createElement("a",{href:"//familyservices.govt.nz/directory"},"familyservices.govt.nz/directory"))),this.displayGovtFooter()&&l.a.createElement("div",{className:"footer-push"},l.a.createElement("div",{className:"footer-icons"},l.a.createElement("a",{href:"https://www.govt.nz",className:"ga-track-logo-footer-aog footer-hm-link"},l.a.createElement("img",{src:"footer-logo-govt.png",srcSet:"footer-logo-govt@2x.png 2x,footer-logo-govt.png 1x",width:"240",height:"46",alt:"New Zealand Government"}))))))}}]),t}(l.a.Component)),R=a(61),j=a(124),D=a(15),_={filter:[],results:[],result:[],searchVars:{category:"",keyword:"",address:"",addressLatLng:{},radius:5e4},serviceDetails:[],noSearchVars:!1,totalResults:0,itemsLoading:!1,hasSearched:!1},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_RESULTS":return Object(D.a)({},e,{itemsLoading:t.loading});case"SHOW_FILTERS":return Object(D.a)({},e,{filter:t.filters});case"SHOW_RESULTS":return Object(D.a)({},e,{results:t.results,searchVars:t.searchVars,noSearchVars:t.noSearchVars,totalResults:t.totalResults,hasSearched:!0,itemsLoading:!1});case"SHOW_SERVICE":return Object(D.a)({},e,{result:t.result,itemsLoading:!1});case"SHOW_SERVICE_DETAILS":return Object(D.a)({},e,{serviceDetails:t.serviceDetails});case"CHANGE_CATEGORIES":return Object(D.a)({},e,{searchVars:t.searchVars});default:return Object(D.a)({},e)}},k=a(184),N=a(186),T=Object(R.c)(V,Object(R.a)(j.a)),A=function(e){function t(){return Object(r.a)(this,t),Object(n.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement(k.a,null,l.a.createElement("div",null,l.a.createElement("h1",{className:"container-fluid"},"Find Wh\u0101nau Support - Mobile Site"),l.a.createElement(N.a,null,l.a.createElement(v.a,{exact:!0,path:"/",component:f}),l.a.createElement(v.a,{path:"/category/:category",component:f}),l.a.createElement(v.a,{path:"/service/:name",component:L}))))}}]),t}(l.a.Component);h.a.render(l.a.createElement(d.a,{store:T},l.a.createElement(A,null)),document.getElementById("root")),h.a.render(l.a.createElement(C,null),document.getElementById("footer"))},40:function(e,t,a){"use strict";a.r(t),a.d(t,"loadFilters",function(){return h}),a.d(t,"loadResults",function(){return p}),a.d(t,"changeCategory",function(){return d}),a.d(t,"loadService",function(){return m}),a.d(t,"showFilters",function(){return E}),a.d(t,"showResults",function(){return f}),a.d(t,"showService",function(){return g}),a.d(t,"showServiceDetails",function(){return v}),a.d(t,"loadingResults",function(){return y}),a.d(t,"changeCategories",function(){return O});var r=a(57),s=a.n(r),n=a(97),o=a.n(n),c="35de6bf8-b254-4025-89f5-da9eb6adf9a0",i="https://catalogue.data.govt.nz/api/3/action/",l=function(e){return e?'&filters={"LEVEL_1_CATEGORY":"'.concat(e,'"}'):""},u="FSD_ID,PROVIDER_CLASSIFICATION,LONGITUDE,LATITUDE,PROVIDER_NAME,PUBLISHED_CONTACT_EMAIL_1,PUBLISHED_PHONE_1,PROVIDER_CONTACT_AVAILABILITY,ORGANISATION_PURPOSE,PHYSICAL_ADDRESS,PROVIDER_WEBSITE_1";function h(){var e=encodeURI('SELECT "LEVEL_1_CATEGORY" as name, COUNT(*) as num FROM "'.concat(c,'" GROUP BY name ORDER BY name')),t="".concat(i,"datastore_search_sql?sql=").concat(e);return function(e){return s.a.get(t).then(function(t){e(E(t.data.result.records))})}}function p(e){var t=Object.keys(e.addressLatLng?e.addressLatLng:{});return e.category||e.keyword||e.addressLatLng&&e.addressLatLng.latitude?function(a){return a(y(!0)),s.a.get(function(e){var t=e.keyword&&e.keyword.length>2?"&q="+e.keyword:"",a=encodeURI("".concat(i,"datastore_search?resource_id=").concat(c,"&fields=").concat(u).concat(t,"&distinct=true").concat(l(e.category)));e.addressLatLng.latitude&&(a+="&limit=5000");return a}(e)).then(function(r){2===t.length&&void 0!==e.addressLatLng?a(f(function(e,t,a){var r=function(e){return e.filter(function(e){return null!==e.PHYSICAL_ADDRESS.match(/\d+/g)&&"0"!==e.LATITUDE&&"0"!==e.LONGITUDE&&null!==e.LATITUDE&&null!==e.LONGITUDE})}(e);for(var s in r){var n=o.a.isPointInCircle({latitude:t.latitude,longitude:t.longitude},{latitude:r[s].LATITUDE,longitude:r[s].LONGITUDE},a),c=o.a.getDistance({latitude:t.latitude,longitude:t.longitude},{latitude:r[s].LATITUDE,longitude:r[s].LONGITUDE});r[s].NEARME=n,r[s].DISTANCE=c}return function(e){return e.sort(function(e,t){return e.DISTANCE<t.DISTANCE?-1:e.DISTANCE>t.DISTANCE?1:0})}(r.filter(function(e){return!0===e.NEARME}))}(r.data.result.records,e.addressLatLng,e.radius>5e4?1e5:e.radius),e,r.data.result.total)):a(f(r.data.result.records,e,r.data.result.total))})}:function(t){t(f([],e,0,!0))}}function d(e){return function(t){t(O(e))}}function m(e,t){var a=encodeURI("".concat(i,"datastore_search?resource_id=").concat(c,"&fields=").concat(u,"&q=").concat(t,"&distinct=true"));if(t)return function(e){return e(y(!0)),s.a.get(a).then(function(t){t.data.result.records.length>0&&e(g(t.data.result.records))})}}function E(e){return{type:"SHOW_FILTERS",filters:e}}function f(e,t,a){return{type:"SHOW_RESULTS",results:e,searchVars:t,totalResults:a,noSearchVars:arguments.length>3&&void 0!==arguments[3]&&arguments[3]}}function g(e){return{type:"SHOW_SERVICE",result:e}}function v(e){return{type:"SHOW_SERVICE_DETAILS",serviceDetails:e}}function y(e){return{type:"LOAD_RESULTS",loading:e}}function O(e){return{type:"CHANGE_CATEGORIES",searchVars:e}}},53:function(e,t,a){"use strict";var r=a(3),s=a(4),n=a(6),o=a(5),c=a(7),i=a(0),l=a.n(i),u=a(116),h=a.n(u),p=a(82),d=a.n(p),m=a(117),E=a.n(m),f=a(118),g=a.n(f),v=a(119),y=a.n(v),O=a(120),b=a.n(O),S=function(e){function t(){return Object(r.a)(this,t),Object(n.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"serviceDetailsItem",value:function(e,t,a){e.push({icon:t,val:a})}},{key:"serviceDetailsBuilder",value:function(){var e=[];return this.props.email&&this.serviceDetailsItem(e,l.a.createElement(d.a,null),l.a.createElement("a",{href:"mailto:".concat(this.props.email)},this.props.email)),this.props.hours&&this.serviceDetailsItem(e,l.a.createElement(E.a,null),this.props.hours),this.props.phone&&this.serviceDetailsItem(e,l.a.createElement(h.a,null),l.a.createElement("a",{href:"tel:".concat(this.props.phone)},this.props.phone)),e}},{key:"serviceLocationsBuilder",value:function(){var e=[];return this.props.address&&this.serviceDetailsItem(e,l.a.createElement(y.a,null),this.props.address),this.props.website&&this.serviceDetailsItem(e,l.a.createElement(g.a,null),l.a.createElement("a",{href:"".concat(this.props.website),target:"_blank",rel:"noopener noreferrer"},this.props.website)),this.props.classification&&this.serviceDetailsItem(e,l.a.createElement(b.a,null),this.props.classification),e}},{key:"listBuilder",value:function(e){return e.map(function(e,t){return l.a.createElement("li",{key:t,className:"list-icon"},l.a.createElement("span",null,e.icon),e.val)})}},{key:"render",value:function(){var e=this.props.locations?this.serviceLocationsBuilder():this.serviceDetailsBuilder();return 0===e.length?null:l.a.createElement("ul",{className:"list-stripped"},this.listBuilder(e))}}]),t}(l.a.Component);t.a=S},83:function(e,t,a){"use strict";var r=a(3),s=a(4),n=a(6),o=a(5),c=a(7),i=a(0),l=a.n(i),u=a(82),h=a.n(u),p=a(121),d=a.n(p),m=a(122),E=a.n(m),f=(a(169),function(e){function t(){return Object(r.a)(this,t),Object(n.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.url?this.props.url:window.location.href,t=this.props.subject?this.props.subject:"Wh\u0101nau%20Services%20in%20your%20area",a="mailto:?subject="+t+"&body="+e,r="https://www.facebook.com/sharer/sharer.php?u="+e,s="https://twitter.com/home?status="+(this.props.description?this.props.description:t)+":%20"+e;return l.a.createElement("div",{className:"sharebar","aria-label":"Sharebar"},l.a.createElement("div",{className:"container"},l.a.createElement("p",null,"Share via: "),l.a.createElement("ul",{className:"sharebar-share"},l.a.createElement("li",null,l.a.createElement("a",{href:a,title:"Share by email"},l.a.createElement(h.a,null)," Email")),l.a.createElement("li",null,l.a.createElement("a",{href:r,title:"Share via Facebook"},l.a.createElement(d.a,null)," Facebook")),l.a.createElement("li",null,l.a.createElement("a",{href:s,title:"Share on twitter"},l.a.createElement(E.a,null)," Twitter")))))}}]),t}(l.a.Component));t.a=f},87:function(e,t,a){"use strict";var r=a(3),s=a(4),n=a(6),o=a(5),c=a(7),i=a(2),l=a(0),u=a.n(l),h=a(182),p=a(57),d=a.n(p),m=(a(105),a(180)),E=a(181),f=function(e){function t(){return Object(r.a)(this,t),Object(n.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"service-categories"},u.a.createElement("small",null,u.a.createElement("b",null,"Service categories: ")),u.a.createElement("small",null,u.a.createElement("ul",{className:"list-stripped"},this.props.categories.map(function(t,a){return u.a.createElement(m.a,{key:a,render:function(){return u.a.createElement("li",{className:t===decodeURIComponent(e.props.category)?"selected":""},u.a.createElement("a",{href:"/service/".concat(e.props.serviceId),onClick:function(a){a.preventDefault(),e.props.displayServiceDetails(t)}},t))}})}))))}}]),t}(u.a.Component),g=Object(E.a)(f),v=function(e){function t(){return Object(r.a)(this,t),Object(n.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return u.a.createElement("div",{className:"service-detail"},this.props.services.length>0&&this.props.services.map(function(e,t){return u.a.createElement("div",{key:t},u.a.createElement("h3",null,e.SERVICE_NAME),u.a.createElement("ul",{className:"list-stripped"},e.SERVICE_TARGET_AUDIENCES&&u.a.createElement("li",null,u.a.createElement("b",null,"Target Audience:")," ",e.SERVICE_TARGET_AUDIENCES),e.DELIVERY_METHODS&&u.a.createElement("li",null,u.a.createElement("b",null,"Delivery Methods:")," ",e.DELIVERY_METHODS),e.SERVICE_REFERRALS&&u.a.createElement("li",null,u.a.createElement("b",null,"Service Referrals:")," ",e.SERVICE_REFERRALS),u.a.createElement("li",null,u.a.createElement("b",null,"Cost:"),e.COST_TYPE&&u.a.createElement("span",null," ",e.COST_TYPE,". "),e.COST_DESCRIPTION&&u.a.createElement("span",null,e.COST_DESCRIPTION))),e.SERVICE_NAME!==e.SERVICE_DETAIL&&u.a.createElement("p",null,e.SERVICE_DETAIL))}),0===this.props.services.length&&u.a.createElement("h4",null,"No further information"))}}]),t}(l.Component),y=a(53),O=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(n.a)(this,Object(o.a)(t).call(this))).state={services:[],categories:[],records:[],recordsLoaded:!1,category:"",localcategory:"",loading:!1},e.loadServiceDetails=e.loadServiceDetails.bind(Object(i.a)(Object(i.a)(e))),e.displayServiceDetails=e.displayServiceDetails.bind(Object(i.a)(Object(i.a)(e))),e}return Object(c.a)(t,e),Object(s.a)(t,[{key:"filters",value:function(e){return e?'&filters={"FSD_ID":"'.concat(e,'"}'):""}},{key:"loadServiceDetails",value:function(e){var t=this;if(!this.state.recordsLoaded){this.setState({loading:!0,category:this.props.searchVars.category,localcategory:this.props.searchVars.category});var a=encodeURI("".concat("https://catalogue.data.govt.nz/api/3/action/","datastore_search?resource_id=").concat("35de6bf8-b254-4025-89f5-da9eb6adf9a0","&fields=").concat("_id,LEVEL_1_CATEGORY,SERVICE_NAME,SERVICE_TARGET_AUDIENCES,SERVICE_DETAIL,DELIVERY_METHODS,COST_TYPE,COST_DESCRIPTION,SERVICE_REFERRALS").concat(this.filters(e)));return d.a.get(a).then(function(e){t.refs.myRef&&t.setState({records:e.data.result.records,recordsLoaded:!0}),t.displayServiceDetails(t.props.searchVars.category)})}}},{key:"displayServiceDetails",value:function(e){var t=e;if(this.state.records.length>0){var a=[],r={},s=[];this.state.records.forEach(function(e){s.includes(e.LEVEL_1_CATEGORY)||s.push(e.LEVEL_1_CATEGORY),t||(t=s[0]),e.LEVEL_1_CATEGORY===t&&a.push(e),r[e.SERVICE_NAME]=e}),this.setState({services:a,loading:!1,categories:s,localcategory:t})}return!1}},{key:"componentDidMount",value:function(){this.props.serviceId&&this.loadServiceDetails(this.props.serviceId)}},{key:"render",value:function(){return u.a.createElement("div",{className:"service-details",ref:"myRef"},this.props.results.ORGANISATION_PURPOSE&&u.a.createElement("div",null,u.a.createElement("p",null,this.props.results.ORGANISATION_PURPOSE)),u.a.createElement(y.a,{locations:!0,classification:this.props.results.PROVIDER_CLASSIFICATION,address:this.props.results.PHYSICAL_ADDRESS,website:this.props.results.PROVIDER_WEBSITE_1}),u.a.createElement("div",{className:this.props.itemsLoading?" loading":""},this.props.loadimmediately&&u.a.createElement(g,{displayServiceDetails:this.displayServiceDetails,category:this.state.localcategory,categories:this.state.categories,serviceId:this.props.results.FSD_ID}),this.props.loadimmediately&&u.a.createElement(v,{services:this.state.services})),!this.props.loadimmediately&&u.a.createElement(h.a,{className:"more-detail",title:"more detail",to:"/service/".concat(this.props.results.FSD_ID)},"more details..."))}}]),t}(l.Component);t.a=O},89:function(e,t,a){"use strict";var r=a(3),s=a(4),n=a(6),o=a(5),c=a(7),i=a(0),l=a.n(i),u=a(179),h=a(187),p=function(e){var t={lat:1*e.record.LATITUDE,lng:1*e.record.LONGITUDE};return l.a.createElement("div",null,e.record.LATITUDE&&e.record.LONGITUDE&&l.a.createElement(u.a,{position:t},l.a.createElement(h.a,null,l.a.createElement("span",null,l.a.createElement("h5",null,e.record.PROVIDER_NAME),l.a.createElement("h6",null,e.record.SERVICE_NAME),l.a.createElement("p",null,e.record.ORGANISATION_PURPOSE),l.a.createElement("p",null,e.record.PHYSICAL_ADDRESS)))))},d=a(183),m=a(185),E=function(e){function t(){return Object(r.a)(this,t),Object(n.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"checkLatLng",value:function(){return Object.keys(this.props.LatLng?this.props.LatLng:{none:"none"})}},{key:"render",value:function(){var e=1!==this.props.map_results.length?{lat:-41,lng:174}:{lat:1*this.props.map_results[0].LATITUDE,lng:1*this.props.map_results[0].LONGITUDE};return l.a.createElement(d.a,{center:e,zoom:1!==this.props.map_results.length?5:12},l.a.createElement(m.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),this.props.map_results.map(function(e,t){return l.a.createElement(p,{key:"marker"+t,record:e})}),";")}}]),t}(i.Component);t.a=E}},[[127,2,1]]]);
//# sourceMappingURL=main.fa0f9147.chunk.js.map